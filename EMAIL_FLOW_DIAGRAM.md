# Email Notification System - Flow Diagram

## ğŸ”„ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EMAIL NOTIFICATION SYSTEM                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    1. WELCOME EMAIL FLOW                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User Registration
      â”‚
      â”œâ”€â–º POST /api/auth/signup
      â”‚         â”‚
      â”‚         â”œâ”€â–º Validate Input
      â”‚         â”‚
      â”‚         â”œâ”€â–º Check Existing User
      â”‚         â”‚
      â”‚         â”œâ”€â–º Hash Password
      â”‚         â”‚
      â”‚         â”œâ”€â–º Insert User to DB
      â”‚         â”‚
      â”‚         â”œâ”€â–º Generate JWT Token
      â”‚         â”‚
      â”‚         â”œâ”€â–º Send Welcome Email (async)
      â”‚         â”‚         â”‚
      â”‚         â”‚         â”œâ”€â–º emailService.sendWelcomeEmail()
      â”‚         â”‚         â”‚         â”‚
      â”‚         â”‚         â”‚         â”œâ”€â–º Create Transporter
      â”‚         â”‚         â”‚         â”‚
      â”‚         â”‚         â”‚         â”œâ”€â–º Generate HTML Template
      â”‚         â”‚         â”‚         â”‚
      â”‚         â”‚         â”‚         â”œâ”€â–º Send via SMTP
      â”‚         â”‚         â”‚         â”‚
      â”‚         â”‚         â”‚         â””â”€â–º Log Result
      â”‚         â”‚         â”‚
      â”‚         â”‚         â””â”€â–º (Non-blocking)
      â”‚         â”‚
      â”‚         â””â”€â–º Return { token, user }
      â”‚
      â””â”€â–º User Receives Welcome Email âœ‰ï¸


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    2. ADMIN EMAIL FLOW                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Admin Dashboard
      â”‚
      â”œâ”€â–º Navigate to "Email" Tab
      â”‚         â”‚
      â”‚         â”œâ”€â–º Load Users List
      â”‚         â”‚
      â”‚         â””â”€â–º Display EmailNotification Component
      â”‚
      â”œâ”€â–º Admin Fills Form
      â”‚         â”‚
      â”‚         â”œâ”€â–º Select User (dropdown)
      â”‚         â”‚
      â”‚         â”œâ”€â–º Enter Subject
      â”‚         â”‚
      â”‚         â””â”€â–º Type Message
      â”‚
      â”œâ”€â–º Click "Send Email"
      â”‚         â”‚
      â”‚         â”œâ”€â–º POST /api/admin/send-email
      â”‚         â”‚         â”‚
      â”‚         â”‚         â”œâ”€â–º Authenticate Admin (JWT)
      â”‚         â”‚         â”‚
      â”‚         â”‚         â”œâ”€â–º Validate Input
      â”‚         â”‚         â”‚
      â”‚         â”‚         â”œâ”€â–º Get User from DB
      â”‚         â”‚         â”‚
      â”‚         â”‚         â”œâ”€â–º emailService.sendCustomEmail()
      â”‚         â”‚         â”‚         â”‚
      â”‚         â”‚         â”‚         â”œâ”€â–º Create Transporter
      â”‚         â”‚         â”‚         â”‚
      â”‚         â”‚         â”‚         â”œâ”€â–º Generate HTML Template
      â”‚         â”‚         â”‚         â”‚
      â”‚         â”‚         â”‚         â”œâ”€â–º Send via SMTP
      â”‚         â”‚         â”‚         â”‚
      â”‚         â”‚         â”‚         â””â”€â–º Return Result
      â”‚         â”‚         â”‚
      â”‚         â”‚         â””â”€â–º Return Success/Error
      â”‚         â”‚
      â”‚         â””â”€â–º Show Success Message âœ“
      â”‚
      â””â”€â–º User Receives Email âœ‰ï¸


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    3. EMAIL SERVICE LAYER                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

emailService.js
      â”‚
      â”œâ”€â–º createTransporter()
      â”‚         â”‚
      â”‚         â””â”€â–º nodemailer.createTransport({
      â”‚                   host: SMTP_HOST,
      â”‚                   port: SMTP_PORT,
      â”‚                   auth: { user, pass }
      â”‚             })
      â”‚
      â”œâ”€â–º getWelcomeEmailTemplate(userName)
      â”‚         â”‚
      â”‚         â””â”€â–º Returns HTML with:
      â”‚                   - SwiftShip branding
      â”‚                   - Personalized greeting
      â”‚                   - Feature list
      â”‚                   - CTA button
      â”‚                   - Company info
      â”‚
      â”œâ”€â–º getCustomEmailTemplate(subject, message)
      â”‚         â”‚
      â”‚         â””â”€â–º Returns HTML with:
      â”‚                   - SwiftShip header
      â”‚                   - Custom subject
      â”‚                   - Admin message
      â”‚                   - Company footer
      â”‚
      â”œâ”€â–º sendWelcomeEmail(email, name)
      â”‚         â”‚
      â”‚         â””â”€â–º transporter.sendMail({
      â”‚                   from: "SwiftShip Express",
      â”‚                   to: email,
      â”‚                   subject: "Welcome...",
      â”‚                   html: template
      â”‚             })
      â”‚
      â””â”€â–º sendCustomEmail(email, name, subject, message)
                â”‚
                â””â”€â–º transporter.sendMail({
                          from: "SwiftShip Express",
                          to: email,
                          subject: subject,
                          html: template
                    })


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    4. SMTP FLOW                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Application
      â”‚
      â”œâ”€â–º Nodemailer
      â”‚         â”‚
      â”‚         â”œâ”€â–º Connect to SMTP Server
      â”‚         â”‚         â”‚
      â”‚         â”‚         â””â”€â–º smtp.gmail.com:587
      â”‚         â”‚
      â”‚         â”œâ”€â–º Authenticate
      â”‚         â”‚         â”‚
      â”‚         â”‚         â””â”€â–º SMTP_USER + SMTP_PASS
      â”‚         â”‚
      â”‚         â”œâ”€â–º Send Email
      â”‚         â”‚         â”‚
      â”‚         â”‚         â”œâ”€â–º From: SwiftShip Express
      â”‚         â”‚         â”‚
      â”‚         â”‚         â”œâ”€â–º To: User Email
      â”‚         â”‚         â”‚
      â”‚         â”‚         â”œâ”€â–º Subject: ...
      â”‚         â”‚         â”‚
      â”‚         â”‚         â””â”€â–º HTML Body
      â”‚         â”‚
      â”‚         â””â”€â–º Return Message ID
      â”‚
      â””â”€â–º Email Delivered to User's Inbox âœ‰ï¸


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    5. UI COMPONENT STRUCTURE                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Admin.jsx
      â”‚
      â”œâ”€â–º Tabs: [Packages] [Users] [Email]
      â”‚
      â””â”€â–º When "Email" tab active:
                â”‚
                â””â”€â–º <EmailNotification users={users} />
                          â”‚
                          â”œâ”€â–º User Dropdown
                          â”‚         â”‚
                          â”‚         â””â”€â–º users.map(u => option)
                          â”‚
                          â”œâ”€â–º Subject Input
                          â”‚         â”‚
                          â”‚         â””â”€â–º text input
                          â”‚
                          â”œâ”€â–º Message Textarea
                          â”‚         â”‚
                          â”‚         â””â”€â–º 8 rows, character counter
                          â”‚
                          â”œâ”€â–º Send Button
                          â”‚         â”‚
                          â”‚         â””â”€â–º onClick: handleSubmit()
                          â”‚
                          â”œâ”€â–º Success Alert
                          â”‚         â”‚
                          â”‚         â””â”€â–º Green notification
                          â”‚
                          â””â”€â–º Error Alert
                                    â”‚
                                    â””â”€â–º Red notification


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    6. DATA FLOW                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Frontend                Backend                 Email Service
   â”‚                       â”‚                          â”‚
   â”‚  POST /signup         â”‚                          â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
   â”‚                       â”‚  sendWelcomeEmail()      â”‚
   â”‚                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                       â”‚                          â”‚ SMTP
   â”‚                       â”‚                          â”œâ”€â”€â”€â”€> Gmail
   â”‚  { token, user }      â”‚                          â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚
   â”‚                       â”‚  { success: true }       â”‚
   â”‚                       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                       â”‚                          â”‚
   â”‚                                                   â”‚
   â”‚  POST /admin/send-email                          â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
   â”‚                       â”‚  sendCustomEmail()       â”‚
   â”‚                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                       â”‚                          â”‚ SMTP
   â”‚                       â”‚                          â”œâ”€â”€â”€â”€> Gmail
   â”‚  { message: "sent" }  â”‚                          â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚
   â”‚                       â”‚  { success: true }       â”‚
   â”‚                       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                       â”‚                          â”‚


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    7. ERROR HANDLING                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Try/Catch Blocks:
      â”‚
      â”œâ”€â–º Auth Route (signup)
      â”‚         â”‚
      â”‚         â””â”€â–º Catches email errors, logs them
      â”‚             (doesn't block registration)
      â”‚
      â”œâ”€â–º Admin Route (send-email)
      â”‚         â”‚
      â”‚         â””â”€â–º Returns 500 error if email fails
      â”‚
      â””â”€â–º Email Service
                â”‚
                â”œâ”€â–º sendWelcomeEmail()
                â”‚         â”‚
                â”‚         â””â”€â–º Returns { success, error }
                â”‚
                â””â”€â–º sendCustomEmail()
                          â”‚
                          â””â”€â–º Returns { success, error }


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    8. CONFIGURATION                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

.env File
      â”‚
      â”œâ”€â–º SMTP_HOST=smtp.gmail.com
      â”‚
      â”œâ”€â–º SMTP_PORT=587
      â”‚
      â”œâ”€â–º SMTP_USER=your-email@gmail.com
      â”‚
      â”œâ”€â–º SMTP_PASS=your-app-password
      â”‚
      â””â”€â–º APP_URL=http://localhost:5173

Environment Variables
      â”‚
      â””â”€â–º Loaded by dotenv
                â”‚
                â””â”€â–º Used by emailService.js
                          â”‚
                          â””â”€â–º createTransporter()
```

## ğŸ¯ Key Points

1. **Welcome Email**: Automatic, non-blocking, sent on signup
2. **Admin Email**: Manual, admin-only, custom content
3. **Email Service**: Centralized, reusable, template-based
4. **Error Handling**: Graceful failures, logged errors
5. **Security**: JWT auth, admin-only access, input validation
6. **UI**: Responsive, feedback-rich, user-friendly

## ğŸ“Š Success Metrics

- âœ… Welcome emails sent automatically
- âœ… Admin can send custom emails
- âœ… Professional HTML templates
- âœ… Error handling implemented
- âœ… Mobile responsive UI
- âœ… Non-blocking execution
- âœ… Secure authentication
